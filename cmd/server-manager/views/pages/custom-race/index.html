{{ define "title" }}Custom Races{{ end }}


{{ define "custom-race-table" }}
    {{ $writeAccess := WriteAccess }}
    <div class="table-responsive">
        <table class="table table-striped table-bordered mt-4 table-custom-race">
            <tr>
                <td></td>
                <th>Details</th>
                <th>Created</th>
                {{ if $writeAccess }}
                    <th>Actions</th>
                {{ end }}
            </tr>

            {{ range $index, $race := . }}
                <tr>
                    <td class="align-middle">
                        <a href="/custom/star/{{ $race.UUID.String }}">
                            {{ if $race.Starred }}
                                <i class="fas fa-star"></i>
                            {{ else }}
                                <i class="far fa-star"></i>
                            {{ end }}
                        </a>
                        <a href="/custom/loop/{{ $race.UUID.String }}">
                            {{ if $race.Loop }}
                                <i class="fas fa-play-circle"></i>
                            {{ else }}
                                <i class="far fa-play-circle"></i>
                            {{ end }}
                        </a>
                    </td>
                    <td class="align-middle">

                        {{ template "race-card" $race }}

                        <hr>
                        <strong>Name:</strong> {{ $race.Name }}


                    </td>
                    <td class="align-middle">{{ timeFormat $race.Created }}<br> {{ dateFormat $race.Created }}</td>
                    {{ if $writeAccess }}
                        <td class="align-middle custom-race-actions">
                            <a class="btn btn-sm btn-success" href="/custom/load/{{ $race.UUID.String }}">Start Race</a>
                            <a class="btn btn-sm btn-info" href="/custom/new?from={{ $race.UUID.String }}">Use as Template</a>
                            <a class="btn btn-sm btn-warning" href="/custom/edit/{{ $race.UUID.String }}">Edit Race</a>
                            <a onClick="return confirm('I understand that this will delete this race setup permanently');"
                               class="btn btn-sm btn-danger" href="/custom/delete/{{ $race.UUID.String }}">Delete</a>
                        </td>
                    {{ end }}
                </tr>
            {{ end }}
        </table>
    </div>
{{ end }}

{{ define "content" }}
    <h1 class="text-center">Custom Races</h1>

    <a class="btn btn-success float-right" href="/custom/new">Create a new Custom Race</a>

    <div class="clearfix mb-5"></div>

    <h2>Starred</h2>

    {{ if gt (len .Starred) 0 }}
        {{ template "custom-race-table" .Starred }}
    {{ else }}
        <p class="text-center">You haven't starred any Custom Races yet. Star some using the table below!</p>
    {{ end }}

    <h2>Auto Loop</h2>

    {{ if gt (len .Loop) 0 }}
        {{ template "custom-race-table" .Loop }}
        <p class="text-center">These custom races will be looped on the server whilst it is inactive!</p>
    {{ else }}
        <p class="text-center">You haven't added any custom races to the auto loop list yet! Add some using the table below!
            These custom races will be looped on the server whilst it is inactive!</p>
    {{ end }}

    <h2>Recent</h2>

    {{ if gt (len .Recent) 0 }}
        {{ template "custom-race-table" .Recent }}
    {{ else }}
        <p class="text-center">We couldn't find any recent races. Perhaps you should <a href="/custom/new">create one now</a>?</p>
    {{ end }}
{{ end }}
