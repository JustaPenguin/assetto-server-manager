{{/* gotype: github.com/cj123/assetto-server-manager.raceWeekendListTemplateVars */}}

{{ define "title" }}Race Weekends{{ end }}

{{ define "content" }}
    <div class="row">
        <div class="col-sm-4"></div>
        <div class="col-sm-4"><h1 class="text-center">Race Weekends</h1></div>
        <div class="col-sm-4">
            {{ if WriteAccess }}
                <a href="/race-weekends/new" class="btn btn-success float-right">Create a new Race Weekend</a>

                <div class="clearfix mb-5"></div>
            {{ end }}
        </div>
    </div>

    <p>
        A Race Weekend is a group of sequential sessions that can be run at any time. For example, you could set up a
        Qualifying session to run on a Saturday, then the Race to follow it on a Sunday. Server Manager handles the
        starting grid for you, and lets you organise Entrants into splits based on their results and other factors!
    </p>


    <div class="table-responsive">
        <table class="table table-bordered table-striped table-championship">
            <tr>
                <th>Name</th>
                <th>Number of Sessions</th>
                <th>Number of Entrants</th>
                <th>Actions</th>
            </tr>

            {{ range $.RaceWeekends }}
                {{- /*gotype: github.com/cj123/assetto-server-manager.RaceWeekend*/ -}}
                {{ if not .HasLinkedChampionship }}

                    <tr>
                        <td>
                            <a href="/race-weekend/{{ .ID.String }}">{{ .Name }}</a>
                        </td>

                        <td>
                            {{ len .Sessions }}
                        </td>

                        <td>
                            {{ len .GetEntryList }}
                        </td>

                        <td class="align-middle custom-race-actions">
                            <a class="btn btn-sm btn-success" href="/race-weekend/{{ .ID }}">View</a>

                            {{ if WriteAccess }}
                                <a class="btn btn-sm btn-warning" href="/race-weekend/{{ .ID }}/edit">Edit</a>
                                <a onClick="return confirm('I understand that this will delete the entire Race Weekend permanently.') "
                                   class="btn btn-sm btn-danger {{ if not DeleteAccess }}disabled{{ end }}" href="/race-weekend/{{ .ID }}/delete">Delete</a>
                            {{ end }}
                        </td>
                    </tr>
                {{ end }}
            {{ end }}
        </table>
    </div>

{{ end }}
